<mxfile host="app.diagrams.net" modified="2021-05-12T08:59:34.096Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36" etag="iISsInUwqnXUvgUOrAt2" version="14.6.11" type="github" pages="2">
  <diagram id="_ftIEuQbQowRMAcyedYQ" name="哈希算法">
    <mxGraphModel dx="946" dy="611" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="1" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-3" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-1" target="ZgCmA2nvShc4hJAHGpMs-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-1" value="什么是哈希算法？" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="175" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-2" value="哈希表（也称为散列表），是根据 键直接访问内存存储位置的数据结构。它通过一个关于键值的函数将所需查询的数据映射到表的一个位置来进行访问，这样加快了查找速度。这个函数称为哈希函数。&lt;br&gt;哈希算法是根据哈希函数和一张哈希表构成的" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="870" y="170" width="380" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-7" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-4" target="ZgCmA2nvShc4hJAHGpMs-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-4" value="普通哈希算法在分布式应用的中不足？" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="500" y="355" width="250" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-9" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-6" target="ZgCmA2nvShc4hJAHGpMs-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-6" value="在分布式系统中，要将数据存储到具体的节点中，如果采用普通的哈希算法进行路由，将数据映射到具体节点上，如 `f(key) = key % n`，那么，在添加添加节点或节点退出时，所有的映射都无效了，如果是持久化存储则要做数据迁移。" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="870" y="350" width="650" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-19" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-8" target="ZgCmA2nvShc4hJAHGpMs-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-20" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-8" target="wSCQ2BmdZy3b9YI79-c1-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-27" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-8" target="wSCQ2BmdZy3b9YI79-c1-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-8" value="一致性哈希算法" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="1145" y="535" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-13" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-17" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-18" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.008;entryY=0.633;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-19" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-10" value="一致性哈希算法提出了在动态变化的环境中，都需要满足四个条件" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1390" y="560" width="205" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-12" value="均衡性" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1718.75" y="395" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-14" value="单调性" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1718.75" y="465" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-15" value="分散性" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1718.75" y="535" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-16" value="负载性" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1718.75" y="605" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-1" value="&lt;ol&gt;&lt;li&gt;选择一个足够大的空间，如 `0 ~ 2^32` 构成一个哈希环&lt;/li&gt;&lt;li&gt;对于集群内的每个节点计算哈希值，哈希值在哈希环上&lt;/li&gt;&lt;li&gt;对每个需要存储的数据键值同样的计算一次哈希值，哈希值也映射到哈希环上&lt;/li&gt;&lt;li&gt;数据存储的位置是沿顺时针的方向找到环上的第一个节点&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="515" width="620" height="140" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-3" target="wSCQ2BmdZy3b9YI79-c1-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-3" value="一致性哈希是把节点的变动造成的影响控制在顺时针相邻节点之间，避免对整个集群都造成影响" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1400" y="760" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-5" value="不能把影响减少到零" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1838.75" y="765" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-8" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-7" target="wSCQ2BmdZy3b9YI79-c1-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-11" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-7" target="wSCQ2BmdZy3b9YI79-c1-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-14" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-7" target="wSCQ2BmdZy3b9YI79-c1-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-22" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-7" target="wSCQ2BmdZy3b9YI79-c1-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-7" value="存在的问题" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1135" y="875" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-12" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-9" target="wSCQ2BmdZy3b9YI79-c1-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-15" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-9" target="wSCQ2BmdZy3b9YI79-c1-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-9" value="数据倾斜" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1400" y="875" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-10" value="数据和节点，只要有一个分布不均就可能造成数据集中在某一台节点上" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1553.75" y="875" width="450" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-17" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-13" target="wSCQ2BmdZy3b9YI79-c1-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-13" value="节点雪崩" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1400" y="970" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-16" value="数据倾斜或宕机，然后产生节点的连锁反应" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1560" y="970" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-24" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-21" target="wSCQ2BmdZy3b9YI79-c1-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-21" value="虚拟节点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1135" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-26" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="wSCQ2BmdZy3b9YI79-c1-23" target="wSCQ2BmdZy3b9YI79-c1-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-23" value="对单一的物理节点进行“分身”出虚拟节点，虚拟节点均衡分布在哈希环上；属于虚拟节点的数据都存储到相应的物理节点上" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1320" y="1085" width="410" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wSCQ2BmdZy3b9YI79-c1-25" value="由于虚拟节点分散在哈希环的各个部分，当某个物理节点下线时，所有相应的虚拟节点都会下线，但是数据会重新发散给多个虚拟节点的相邻节点，多个节点分摊压力，能在一定程度上避免雪崩（连锁反应）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1810" y="1085" width="460" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="RX99-fU9jca6GVLDJZ-t" name="排序">
    <mxGraphModel dx="2066" dy="1202" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="1" shadow="0">
      <root>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-0" />
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-1" parent="9bjt-Q4PApvt6V4Nclcf-0" />
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="9bjt-Q4PApvt6V4Nclcf-1" source="9bjt-Q4PApvt6V4Nclcf-2" target="9bjt-Q4PApvt6V4Nclcf-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-2" value="插入排序" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="9bjt-Q4PApvt6V4Nclcf-1">
          <mxGeometry x="160" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="9bjt-Q4PApvt6V4Nclcf-1" source="9bjt-Q4PApvt6V4Nclcf-3" target="9bjt-Q4PApvt6V4Nclcf-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-3" value="insertion_sort(A)&lt;br&gt;1. for j = 2 to A.length&lt;br&gt;2.&amp;nbsp; &amp;nbsp; key = A[j]&lt;br&gt;3.&amp;nbsp; &amp;nbsp; // Insert A[j] into the sorted sequence A[1...j-1]&lt;br&gt;4.&amp;nbsp; &amp;nbsp; i = j - 1&lt;br&gt;5.&amp;nbsp; &amp;nbsp; while i &amp;gt; 0 and A[i] &amp;gt; key&lt;br&gt;6.&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; A[i + 1] = A[i]&lt;br&gt;7.&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; i = i - 1&lt;br&gt;8.&amp;nbsp; &amp;nbsp; A[i + 1] = key" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="9bjt-Q4PApvt6V4Nclcf-1">
          <mxGeometry x="360" y="95" width="280" height="150" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-5" value="插入排序是当前迭代元素的左边有序，右边无序，将当前迭代元素插入到左边的过程&lt;br&gt;&lt;br&gt;5~7 是将大于当前迭代元素的元素右移，8 是将当前迭代元素插入到正确的位置" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="9bjt-Q4PApvt6V4Nclcf-1">
          <mxGeometry x="720" y="100" width="260" height="140" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="9bjt-Q4PApvt6V4Nclcf-1" source="9bjt-Q4PApvt6V4Nclcf-7" target="9bjt-Q4PApvt6V4Nclcf-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-7" value="循环不变式" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="9bjt-Q4PApvt6V4Nclcf-1">
          <mxGeometry x="160" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9bjt-Q4PApvt6V4Nclcf-8" value="用于证明循环的正确性，必须证明的三条性质：&lt;br&gt;初始值：循环的第一次迭代之前为真&lt;br&gt;保持：循环的某次迭代之前为真，下次迭代之前仍为真&lt;br&gt;终止：终止循环时为真" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="9bjt-Q4PApvt6V4Nclcf-1">
          <mxGeometry x="360" y="320" width="370" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
