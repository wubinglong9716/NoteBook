<mxfile host="app.diagrams.net" modified="2021-04-26T12:20:59.090Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36" etag="qkIgbyeCOsdDqhPeMDlS" version="14.6.6" type="github">
  <diagram id="_ftIEuQbQowRMAcyedYQ" name="哈希算法">
    <mxGraphModel dx="2066" dy="1202" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="1" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-3" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-1" target="ZgCmA2nvShc4hJAHGpMs-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-1" value="什么是哈希算法？" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="170" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-2" value="哈希算法是将任意长度的二进制值映射为较短的固定长度的二进制值，这个小的二进制值称为哈希值。哈希值是一段极其紧凑的数值表示形式" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="170" width="380" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-7" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-4" target="ZgCmA2nvShc4hJAHGpMs-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-4" value="普通哈希算法在分布式应用的中不足？" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="350" width="250" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-9" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-6" target="ZgCmA2nvShc4hJAHGpMs-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-6" value="在分布式系统中，要将数据存储到具体的节点中，如果采用普通的哈希算法进行路由，将数据映射到具体节点上，如 `f(key) = key % n`，那么，在添加添加节点或节点退出时，所有的映射都无效了，如果是持久化存储则要做数据迁移。" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="570" y="350" width="650" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-11" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-8" target="ZgCmA2nvShc4hJAHGpMs-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-8" value="一致性哈希算法" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="845" y="500" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-13" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-17" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-18" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.008;entryY=0.633;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-19" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-10" target="ZgCmA2nvShc4hJAHGpMs-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-10" value="一致性哈希算法提出了在动态变化的环境中，都需要满足四个条件" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="792.5" y="670" width="205" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-21" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-12" target="ZgCmA2nvShc4hJAHGpMs-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-12" value="均衡性" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-24" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-14" target="ZgCmA2nvShc4hJAHGpMs-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-14" value="单调性" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="665" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-26" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-15" target="ZgCmA2nvShc4hJAHGpMs-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-15" value="分散性" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-16" value="负载性" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-20" value="哈希的结果能够尽可能的分布到所有的缓冲中去（绝大多数数哈希算法都能满足这一条件）" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1320" y="540" width="420" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-22" value="如果一些内容通过哈希分派到了相应的缓冲中，又有新的缓冲区加入到系统中，那么哈希的结果必须保证原有的分配内容可以被映射到新的缓冲区中，而不会被映射到旧的缓冲集合中" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1320" y="655" width="420" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-23" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="ZgCmA2nvShc4hJAHGpMs-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="460" as="sourcePoint" />
            <mxPoint x="1010" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZgCmA2nvShc4hJAHGpMs-25" value="在分布式环境中，终端有可能看不到所有的换种，而是只能看到其中的一部分。当终端希望通过哈希过程将内容映射到缓冲时，由于不同的终端所见的缓冲范围有可能不同，从而导致哈希的结果不一致，最终的结果是相同的内容被不同的终端映射到不同给的缓冲" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1320" y="760" width="480" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
